<nav class="no-prose flex items-center justify-between gap-10 bg-gray-200 px-8 shadow-xl dark:bg-gray-800">
    <img src="/_assets/sapienza-big.png" class="-my-4 mx-0">
    {% comment %} <img src="/_assets/sapienza.svg" class="m-0 h-20"> {% endcomment %}
    <button
        class="flex items-center justify-between gap-5 rounded-xl border border-gray-100 p-2 text-black shadow-sm dark:border-gray-900 dark:text-white"
        onclick="openSearchDialog()"
    >
        <img src="/_assets/search.svg" class="icon m-0">
        <span>Ricerca veloce...</span>
        <span> <kbd>Ctrl</kbd> + <kbd>k</kbd> </span>
    </button>

    <span
        id="desktopDarkMode"
        class="material-symbols-outlined cursor-pointer rounded-full border border-black p-4 dark:border-white"
        onclick="toggleDarkMode()"
    >
        <img src="/_assets/dark_mode.svg" class="icon m-0">
    </span>
</nav>

<script>
    function openNavigationDrawer() {
        document.getElementById('navigationDrawer').showModal();
    }

    function closeNavigationDrawer() {
        document.getElementById('navigationDrawer').close();
    }

    function setupDarkMode() {
        const isDarkMode = JSON.parse(localStorage.getItem('darkMode'));
        const icon = isDarkMode ? 'light_mode' : 'dark_mode';

        {% comment %} const desktopDarkMode = document.getElementById('desktopDarkMode'); {% endcomment %}
        {% comment %} const mobileDarkMode = document.getElementById('mobileDarkMode'); {% endcomment %}

        const desktopIcon = document.querySelector('#desktopDarkMode > img')
        {% comment %} const mobileIcon = document.querySelector('#mobileDarkMode > img') {% endcomment %}

        desktopIcon.src = `/_assets/${ icon }.svg`;
        {% comment %} mobileIcon.src = `/_assets/${ icon }.svg`; {% endcomment %}

        document.body.classList.toggle('dark', isDarkMode);
    }

    function toggleDarkMode() {
        document.body.classList.toggle('dark');
        const isDarkMode = document.body.classList.contains('dark');

        localStorage.setItem('darkMode', isDarkMode);
        const icon = isDarkMode ? 'light_mode' : 'dark_mode';

        const desktopIcon = document.querySelector('#desktopDarkMode > img')
        {% comment %} const mobileIcon = document.querySelector('#mobileDarkMode > img') {% endcomment %}

        desktopIcon.src = `/_assets/${ icon }.svg`;
        {% comment %} mobileIcon.src = `/_assets/${ icon }.svg`; {% endcomment %}

        window.event.stopPropagation();
    }

    document.addEventListener('DOMContentLoaded', setupDarkMode);
</script>
